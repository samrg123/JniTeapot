{
	"$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",

	"name": "JniTeapot C++",
	"scopeName": "source.cpp.jniteapot-cpp",
	"injectionSelector": "L:source.cpp",
	
	"patterns": [
		{ "include": "#alignas" },
		{ "include": "#shader"  }
	],

	"repository": {
	
		"alignas": {
			"name": "jniteapot-cpp.attribute.alignas",
			"match": "\\b(alignas)\\b"
		},

		"parenthesisContent": {
			"name": "jniteapot-cpp.parenthesisContent",
			"match": "[^()]+" 
		},

		"parenthesisExpression": {
			"begin": "\\(",
			"end": "\\)",
			
			"contentName": "jniteapot-cpp.parenthesisExpression.content",

			"beginCaptures": { 
				"0": { "name": "jniteapot-cpp.parenthesisExpression.begin" } 
			},
			"endCaptures": { 
				"0": { "name": "jniteapot-cpp.parenthesisExpression.end" } 
			},
			
			"patterns": [
				{ "include": "#parenthesisContent" },
				{ "include": "#parenthesisExpression" }
			]
		},
		
		"shaderMacro": {
			"begin": "(\\s|^)Shader[0-9A-z_]+\\s*\\(",
			"end": 	 "\\)",

			"contentName": "jniteapot-cpp.shader.macro.content",
			
			"beginCaptures": { 
				"0": { "name": "jniteapot-cpp.shader.macro.begin" } 
			},
			"endCaptures": { 
				"0": { "name": "jniteapot-cpp.shader.macro.end" } 
			},
			
			"patterns": [
				{ "include": "#parenthesisContent" },
				{ "include": "#parenthesisExpression" }
			]
		},

		"shader": {
			"begin": "(\\s|^)Shader\\s*\\(",
			"end": 	 "\\)",
			
			"contentName": "jniteapot-cpp.shader.content",
			
			"beginCaptures": { 
				"0": { "name": "jniteapot-cpp.shader.begin" } 
			},
			"endCaptures": { 
				"0": { "name": "jniteapot-cpp.shader.end" } 
			},

			"patterns": [
				{ "include": "#shaderMacro" },
				{ "include": "#parenthesisExpression" },
				{ "include": "source.glsl" }
			]
		}
	}
}